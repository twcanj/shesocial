# InfinityMatch 管理員權限快速參考

## 功能級別權限核心規則

**重要規則**：當管理員被授予某個功能的權限時，他們可以執行該功能下的所有操作，無需額外授權。

InfinityMatch 採用**功能級別權限模型**，而非操作級別權限模型。這意味著權限是以功能模塊為單位授予的，而不是以具體操作為單位。

## 管理員類型與權限對照表

| 功能模塊 | 超級管理員 | 系統管理員 | 營運管理員 | 客戶管理員 |
|---------|----------|----------|----------|----------|
| 系統管理 (system) | ✅ | ✅ | ❌ | ❌ |
| 用戶管理 (users) | ✅ | ✅ | ❌ | ❌ |
| 活動管理 (events) | ✅ | ✅ | ✅ | ❌ |
| 面試管理 (interviews) | ✅ | ✅ | ❌ | ✅ |
| 預約管理 (appointments) | ✅ | ✅ | ❌ | ✅ |
| 管理員管理 (admin) | ✅ | ✅ | ❌ | ❌ |
| 營銷管理 (marketing) | ✅ | ✅ | ✅ | ❌ |
| 內容管理 (content) | ✅ | ✅ | ✅ | ❌ |
| 數據分析 (analytics) | ✅ | ✅ | ✅ | ✅ |

## 功能模塊包含的操作

當管理員被授予某個功能模塊的權限時，他們自動獲得該模塊下的所有操作權限，無需額外授權。以下是各功能模塊包含的操作：

### 系統管理 (system)
- 系統監控
- 系統配置
- 系統備份
- 系統日誌
- 系統維護

### 用戶管理 (users)
- 查看用戶列表
- 查看用戶詳情
- 編輯用戶資料
- 更改用戶狀態
- 刪除用戶
- 用戶審核

### 活動管理 (events)
- 查看活動列表
- 查看活動詳情
- 創建新活動
- 編輯活動
- 刪除活動
- 管理活動狀態
- 管理活動參與者

### 面試管理 (interviews)
- 查看面試列表
- 查看面試詳情
- 安排面試
- 編輯面試
- 取消面試
- 管理面試官
- 面試評估

### 預約管理 (appointments)
- 查看預約列表
- 查看預約詳情
- 創建預約
- 編輯預約
- 取消預約
- 管理預約狀態

### 管理員管理 (admin)
- 查看管理員列表
- 查看管理員詳情
- 創建管理員
- 編輯管理員
- 刪除管理員
- 管理角色
- 管理權限
- 查看審計日誌

### 營銷管理 (marketing)
- 查看營銷活動
- 創建營銷活動
- 編輯營銷活動
- 刪除營銷活動
- 管理營銷模板
- 管理受眾群體

### 內容管理 (content)
- 查看內容
- 創建內容
- 編輯內容
- 刪除內容
- 管理內容類別
- 內容審核

### 數據分析 (analytics)
- 查看儀表板
- 查看報表
- 導出數據
- 設置分析目標

## 權限檢查示例

### 後端權限檢查

```javascript
// 檢查管理員是否有活動管理權限
const hasEventPermission = await adminPermissionService.userHasPermission(adminId, 'events')

// 使用權限中間件保護路由
router.get('/events', adminAuth, requirePermission('events'), async (req, res) => {
  // 處理請求
})
```

### 前端權限檢查

```javascript
// 檢查管理員是否有活動管理權限
const { hasPermission } = useAdminAuth()
const canManageEvents = hasPermission('events')

// 在 UI 中使用權限檢查
{canManageEvents && (
  <button onClick={createEvent}>創建活動</button>
)}
```

## 最佳實踐

1. **始終在前端和後端都進行權限檢查**
   - 前端：提供良好的用戶體驗
   - 後端：確保安全性

2. **使用功能名稱進行權限檢查**
   - 正確：`hasPermission('events')`
   - 也可接受：`hasPermission('events:view')` (系統會自動提取功能名稱)

3. **定期審查權限分配**
   - 確保管理員只有必要的權限
   - 移除不再需要的權限

4. **記錄權限相關操作**
   - 權限變更
   - 權限使用
   - 權限拒絕
